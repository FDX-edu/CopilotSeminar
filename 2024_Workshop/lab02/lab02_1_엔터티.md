# Microsoft Copilot Studio의 엔터티

Microsoft Copilot Studio는 NLU(자연어 이해)를 사용하여 사용자가 말하는 내용을 해석하고 사용자 발화를 기존 주제와 일치시키려고 합니다. 
예를 들어 사용자가 \"*기프트 카드를 사용하려고 했는데 작동하지 않습니다*\"라고 말하는 경우, 
코파일럿은 정확한 구문이 트리거 구문으로 나열되지 않은 경우에도 기프트 카드가 작동하지 않는 것과 관련된 주제로 사용자를 라우팅해야 한다는 것을 알고 있습니다. 
이 개념은 **의도 인식**이라고도 합니다.

NLU는 코파일럿이 사용자 입력에서 엔터티를 식별하는 데도 도움이 될 수 있습니다. 
엔터티는 문장에서 식별하고 추출하려는 핵심 정보를 나타냅니다.
전화번호, 우편번호, 도시, 케이스 ID, 사람 이름 등이 될 수 있습니다.
사용자 고유의 엔터티를 정의할 수도 있습니다. 
코파일럿은 사용자 입력에서 관련 정보를 인식한 다음 나중에 사용할 수 있도록 저장할 수 있습니다.

예를 들어 사용자가 \"*레드 커피 머신 50대를 원합니다*\"라고 입력하면 AI는 다음을 이해할 수 있습니다.

-   \"**50**\"은 숫자 \"50\"이며 구매할 제품의 수이기도 합니다.

-   \"**빨간색**\"은 색상이며 구매할 제품의 색상입니다.

-   \"**커피 머신**\"은 그 사람이 구매하고자하는 제품을 의미합니다.

Microsoft Copilot Studio에서 일부 주제(예: 숫자 및 색상)는 이미 코파일럿을 위해 AI에게 학습되었습니다. 
코파일럿 작성자는 이 실습에서 시연된 것처럼 \"커피 머신\"이 제품이라는 사실과 같은 다른 주제를 지정해야 합니다.

두 가지 유형의 엔터티는 다음과 같습니다.

-   **Prebuilt** -- 나이, 색상, 번호 및 이름과 같이 가장 많이 사용되는 정보를 나타냅니다.
    Microsoft Copilot Studio는 이러한 엔터티를 자동으로 인식할 수 있습니다. 
    이러한 엔터티는 Microsoft Copilot Studio의 엔터티 목록에 표시됩니다.

-   **Custom(사용자 지정**) -- 사용자가 만드는 개체입니다. 
    미리 빌드된 엔터티는 일반적으로 사용되는 정보 유형을 다루지만 코파일럿의 자연어 이해 모델에 일부 도메인별 지식을 가르쳐야 하는 경우가 있습니다. 
    예를 들어 제품 유형 목록에 대한 **폐쇄 목록 엔터티**를 만들어야 할 수 있습니다.
    또는 문자, 숫자 및 특수 문자를 결합하는 명명 패턴(예: 지원 요청 ID의 경우 \"*SR-00001*\")을 따르는 특정 문자열을 인식하도록 **정규식**을 기반으로 엔터티를 구성할 수 있습니다.

비공개 목록 엔터티에 대한 스마트 매칭 및 동의어는 코파일럿을 보다 직관적으로 만들 수 있습니다.

-   **스마트 매칭** -- 코파일럿은 사용자의 입력을 거의 일치하지만 완벽하지 않은 엔터티와 일치시킬 수 있는 유연성을 제공합니다. 
    특히 Copilot이 맞춤법 오류를 자동 수정하고 \"softball\"을 \"baseball\"에 자동으로 일치시키는 것과 같이 일치 논리를 의미론적으로 확장할 수 있습니다. 
    엔티티에 모델 번호 또는 오류 코드가 포함된 경우와 같이 완벽하게 일치해야 하는 경우 이 기능을 끌 수 있습니다.

-   **동의어** -- 사용자가 입력한 내용이 제공한 옵션과 일치한다는 것을 인식할 수 있습니다. 
    예를 들어 \"*무료 배송*\"의 경우 \"*배송비 없음*\"을 동의어로 추가할 수 있습니다. 
    \"*빠른 배송*\"의 경우 \"*2일 배송*\" 또는 \"*익일 배송*\"을 동의어로 추가할 수 있습니다. 
    사용자가 이러한 구 중 하나를 입력하면 적절하게 일치합니다.

다음 작업에서는 사용자 지정 엔터티를 만들고 이미 만든 항목 내에서 사용하는 방법을 보여 줍니다.

## 작업 1: 엔터티 및 슬롯 채우기 사용

이 작업에서는 개체와 슬롯 채우기를 사용하는 방법을 배웁니다.

1.  Microsoft Copilot Studio에서 부조종사를 연 상태에서 오른쪽 위 모서리의 **Settings**로 이동하여 **Entities**를 선택합니다. 
    
    그런 다음, **Add an entity** 및 **New entity**를 선택합니다
    
    <img src="./images/image3.png" width="400px">

3.  **Create an entity** 대화 상자에서 **Closed List**를 선택합니다.

4.  **Name** 필드에 **Order Action** 을 입력합니다.

5.  목록 항목 내에 *변경, 체크 및 삭제*라는 세 가지 옵션을 추가합니다. 

    각 옵션에 대한 동의어를 선택하여 동의어를 추가하도록 선택할 수도 있습니다 ( *선택 사항* ).

6.  **Smart matching**이 켜져 있는지 확인한 다음, **Save**를 클릭합니다.
   
    <img src="./images/image4.png" width="800px">

    이 작업으로 **주문 작업** 이라는 엔티티가 만들어지고, 질문 노드에서 사용자의 전체 응답을 **주문 작업**이라는 엔티티로 대체할 수 있게 됩니다.

6.  이전 실습에서 만든 주제인 **주문 상태 확인**으로 돌아가서 원래 사용자의 전체 응답을 식별하기 위해 만든 질문 노드를 선택합니다.
    **Identity**를 선택하면 목록에서 엔티티를 선택할 수 있는 슬라이드아웃 메뉴가 오른쪽에 표시됩니다.
    
    **주문 작업**이라는 이전 단계에서 만든 사용자 지정 엔터티를 선택합니다.
    
    <img src="./images/image5.png" width="600px">

7.  **Select options for user**를 선택한 다음 사용자에게 표시할 모든 옵션을 선택합니다.
    
    <img src="./images/image6.png" width="600px">

8.  변경사항을 **저장** 합니다.

    질문 노드에 대한 사용자 지정 엔터티를 성공적으로 설정했습니다.
    질문 노드의 기본 동작은 질문 응답이 저장된 변수에 이미 값이 있는 경우 질문을  건너뛰고 묻지 않는 것입니다.

## 작업 2: 모호성 문제 테스트 및 해결

1.  **Test** 창을 사용하여 트리거 문구 중 하나를 입력하여 엔터티 및 슬롯 채우기가 작동하는 방식을 시도해 보십시오.

    ```
    주문을 확인할 수 있습니까?
    ```

    Lab 시나리오를 따르고 있고 수업 주제를 유지한 경우 명확성 질문이 표시되어야 합니다 (예: \"*...을 의미했나요?*\", 가장 관련성이 높은 주제를 선택하도록 요청) 두 개 이상의 주제가 주문과 관련된 유사한 트리거
    구문으로 구성되었기 때문입니다.
    
    <img src="./images/image9.png" width="400px">
    
    <img src="./images/image4.svg" width="30"> **전문가 팁:** 조종사의 이러한 모호성을 피하려면 다음을 수행할 수 있습니다.
    
    • 중복되는 주제 중 하나를 비활성화합니다.    
    • 중복되는 주제의 트리거 구문을 업데이트합니다.    
    • 원하는 주제의 구문 속성, 고급으로 이동하여 여러 주제 일치 항목에 포함을 선택 취소하여 모호성 해소 메커니즘에서 특정 주제를 제외합니다.    
    • 모호성 해소 질문을 적용한 후 리디렉션을 사용하여 적절한 자식 주제를 호출하는 모든 부모 주제를 설정하여 주제 전략을 미세 조정합니다.

3.  **Topics** 메뉴로 이동합니다.

4.  **Enabled** 항목에서 **Off** 를 선택하여, 해당 토픽을 비활성화 합니다.

    <img src="./images/image12.png">

## 작업 3: 슬롯 채우기 테스트

1.  **Test** 창 표시

2.  **새로 고침** 버튼을 사용하여 새 대화를 시작합니다.

3.  트리거 문구 중 하나와 일치하는 문장을 입력하여 entities 및 slot filling이 어떻게 작동하는지 시도해 보세요.

    ```
    내 주문을 변경할 수 있나요?                           
    ```

4.  **주문상태확인** 으로 이동하여 **Variables** 창을 표시하고  **Test** 탭에서 **Topic**을 확장합니다.

    사용자가 주문을 \"변경\"하려는 의도로 이 주제를 트리거하고 트리거 문구  뒤의 후속 질문에서 엔터티가 변수에 슬롯으로 채워졌기 때문에 프로세스가  작동하는 것을 관찰할 수 있습니다.
    따라서 질문이 묻지 않고 건너뜁니다. 이는 엔터티 및 슬롯 채우기를 사용하여 사용자가 제출한 발화에서 정보를 검색했기 때문입니다.
    이 방법을 사용하면 사용자가 이미 정보를 제공한 질문을 할 필요가 없습니다.

    <img src="./images/image13.png">

    


    
