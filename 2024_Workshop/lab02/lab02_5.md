# Ask a question 노드 동작

이전에 이 실습에서는 **Ask a question** 노드의 기본 사항을 다루 었으며 엔터티 및 슬롯 채우기를 사용하여 이 개념을 기반으로 했습니다. 
사용자의 응답을 저장하는 것 외에도 **Ask a question** 노드에는 설정할 수 있는 더 많은 동작 옵션이 있습니다. 
한 가지 옵션은 연결된 변수에 이미 값이 포함되어 있는 경우 질문을 건너뛸 수 있는 기능입니다. 
이전 연습에서 이 프로세스가 작동하는 것을 관찰했는데, 코파일럿에게 명령을 확인하도록 요청했을 때 질문을 건너뛰었습니다. 
엔터티 및 슬롯 채우기를 사용하여 Microsoft Copilot Studio가 사용자가 요청한 문장에서 데이터를 검색한 다음 변수 내에 데이터를 저장할 수 있도록 허용했기 때문에 질문을 건너뛰었습니다.
Microsoft Copilot Studio에서 질문 노드에 도달한 후 이미 데이터가 포함되어 있으므로 질문을 다시 할 필요가 없었습니다. 
이 접근 방식은 사용자나 고객이 부조종사와 대화할 때 동일한 질문에 여러 번 대답할 필요가 없기 때문에 더 효율적입니다.

1.  **주문 상태 확인** 항목내에서 **Ask a question** 노드를 선택합니다. 
    그런 다음, 다음 스크린샷과 같이 Ask a question 노드의 오른쪽 위 모서리에 있는 줄임표를 선택하여 메뉴를 확장한 다음, 메뉴에서 **Properties**를 선택합니다.

    <img src="https://github.com/FDX-edu/240819_CopilotEdu_test/raw/main/Lab%2002/media/image35.png">

2.  표시되는 **Question properties** 패널에서 **Question behavior**를 선택합니다.
    
    <img src="https://github.com/FDX-edu/240819_CopilotEdu_test/raw/main/Lab%2002/media/image36.png">

**Ask a question** 노드에는 묻는 질문에 대한 사용자의 응답을 더 잘 식별할 수 있도록 몇 가지 구성 가능한 옵션이 있습니다. 
이 구성 요소는 대화형 응용 프로그램을 개발할 때 중요합니다. 
자연어 응답을 관리하는 백그라운드에서 AI의 유형에 관계없이 사용자는 예기치 않거나 식별할 수 없는 답변을 제공할 수 있기 때문입니다. 
이러한 상황에서 코파일럿의 행동을 처리할 수 있는 능력은 향상된 고객 경험을 제공하는 데 도움이 됩니다. 
이 시나리오는 실생활에서도 발생하는데, 다른 사람에게 질문을 했는데 상대방이 질문을 이해하지 못할 때입니다. 
최상의 경험과 대화를 위해서는 원래 이해하지 못했던 동일한 질문을 반복하는 것보다 다르게 말하거나 다르게 행동하는 것이 중요합니다.

**Question behavior** 창에서 선택할 수 있는 질문 동작 컨트롤은 다음과 같습니다.

-   **Skip behavior/Skip question** \- 코파일럿 작성자는 변수에 이미 값이 있는 경우 질문을 건너뛸 수 있습니다. 
    질문의 변수는 주제의 다른 곳, 다른 주제 또는 슬롯 채우기와 엔터티를 사용하여 설정된 값을 가질 수 있습니다. 
    이 동작을 통해 코파일럿 작성자는 질문을 건너뛸 수 있고, 변수에 값이 있는 경우 그래도 질문을 할 수 있습니다. 
    사용 가능한 다른 옵션으로는 PowerFx를 사용하여 조건을 만들고 해당 조건이 참이면 질문을 건너뛸 수 있습니다.

-   **Reprompt/How many reprompts** \- 질문을 특정 횟수만큼 반복하도록 동작을 설정할 수 있으며, 드롭다운 메뉴에서 반복하지 않음, 한 번 반복 또는 최대 두 번 반복을 선택할 수 있습니다.
    질문 건너뛰기 옵션과 마찬가지로 PowerFx를 사용하여 이 동작이 발생하는 조건을 설정할 수도 있습니다.
    질문을 반복하도록 재시도를 선택한 경우에만 발생하는 재시도 프롬프트 옵션을 수정할 수 있습니다. 
    재시도 프롬프트 옵션을 선택하면 질문을 다시 표현하기 위해 다른 메시지를 추가할 수 있으며, 질문을 더 자연스럽게 들리게 하고 고객이나 사용자에게 더 도움이 되도록 메시지 검증을 추가할 수 있습니다.

-   **Additional entity validation/Condition** \- 이 동작은 엔티티가 슬롯을 채울 수 있는 유효한지 확인하고 엔티티 유형에 따라 달라지는 특정 조건이 있는 경우 중요합니다. 
    조건이 충족되지 않으면 동일한 프롬프트 동작을 사용하여 프롬프트를 변경하여 사용자에게 다른 입력을 제공하도록 권장할 수도 있습니다.

-   **유효한 엔터티를 찾을 수 없음/엔터티를 찾을 수 없는 경우 작업** --
    엔터티를 찾을 수 없는 경우 질문을 건너뛰는 대신 변수를 비워 두거나,
    Power Fx를 사용하여 변수를 특정 또는 동적으로 설정하거나,
    에스컬레이션 시스템 항목을 호출하는 등의 동작을 지정할 수 있습니다.

-   **중단 --** 고객이 질문 노드가 있는 **현재 주제가 아닌 다른 주제로
    전환할 수 있어야 하는지 여부를 나타낼 수** 있습니다 . 이 옵션은
    고객이 다른 질문으로 질문에 대답할 가능성이 있고 단일 질문 노드
    내에서 모든 예외를 처리할 필요 없이 대화를 계속하려는 경우에
    유용합니다.

    <img src="https://github.com/FDX-edu/240819_CopilotEdu_test/raw/main/Lab%2002/media/image37.png">

이제 질문 노드의 **핵심 기능과 관련 동작을 알았으므로** 메시지 **및**
질문 **노드**에서 서식 있는 텍스트 응답을 탐색할 수 있습니다.

# message 및 question 노드에 대한 rich text 옵션

Microsoft Copilot Studio에는 부조종사를 만들기 위한 몇 가지 확장 기능이
포함되어 있으며 고객에게 긍정적인 대화 환경을 제공합니다. 한 가지 핵심
기능은 메시지 및 질문 노드에 사용할 수 있는 서식 있는 텍스트 작성
기능입니다 .

<img src="https://github.com/FDX-edu/240819_CopilotEdu_test/raw/main/Lab%2002/media/image38.png">

사용할 수 있는 서식 있는 텍스트 작성 옵션의 유형은 다음과 같습니다.

-   **이미지** -- 카드에 표시되는 이미지를 추가할 수 있습니다. 이미지의
    URL과 제목(선택 사항)을 추가합니다.

-   **비디오** -- 공개적으로 사용 가능한 MP4 또는 YouTube 비디오
    URL이어야 하는 비디오 URL을 추가할 수 있습니다.

-   **기본 카드** -- 이 옵션에는 시각적 개체와 같은 적응형 카드를
    제공하는 단순 카드가 포함되지만 이 옵션을 사용하려면 제목, 메시지 및
    기본 작업이 포함된 단추를 추가하는 기능과 같은 표준 입력이
    필요합니다.

-   **적응형 카드** -- 플랫폼에 구애받지 않는 카드인 적응형 카드를
    추가할 수 있으며, 이는 작업 요청, 특정 정보에 중점을 두고 표시되도록
    정보 표시 등을 포함하여 당시의 요구 사항에 맞게 유연하게
    설계되었습니다. Microsoft Copilot Studio는 이러한 랩이 작성된 시점에
    적응형 카드 v.1.5를 지원합니다.

-   **빠른 회신** -- 이 옵션을 사용하면 사용자가 텍스트 기반
    시나리오에서 응답을 입력할 필요 없이 특정 옵션 중에서 선택할 수
    있습니다. 빠른 응답은 선택 사항이므로 사용자는 여전히 자신의 응답을
    입력하거나 말할 수 있습니다. 이러한 회신을 사용하여 일반적인 제안을
    제공하거나 요청되는 정보 유형에 대한 아이디어를 사용자에게 제공해야
    합니다.

메시지 변형은 다음 작업에서 다룹니다. 이제 이러한 동작에 익숙해질 수
있도록 이러한 옵션 중 몇 가지를 설정합니다.

## 작업 1: 메시지 노드에서 서식 있는 텍스트 기능 사용

1.  주제 **탭**으로 이동하여 **시스템** 탭을 선택한 다음 **대화 시작**
    주제를 입력합니다.

2.  기존 **메시지** 노드 에서 **+ 추가**를 선택한 다음, **이미지를**
    선택합니다. 다음 스크린샷과 같이 표시되는 이미지 블록을 선택합니다.
    **제목(Title)** 및 **이미지(Image**) 텍스트 상자가 표시됩니다.
    공개적으로 사용 가능한 이미지에 대한 이미지 URL을 입력해야 합니다.
    필요에 따라 제목 필드를 사용하여 이미지의 이름을 추가할 수도
    있습니다 .

    ```
    https://learn.microsoft.com/en-us/training/achievements/build-effective-bots.svg
    ```
    
    <img src="https://github.com/FDX-edu/240819_CopilotEdu_test/raw/main/Lab%2002/media/image39.png">

3.  여전히 동일한 주제 및 메시지에서 **+ 추가** 를 다시 선택한 다음,
    **빠른 회신을 선택합니다**.

    ```
    Help with my order
    ```
    ```
    주문을 도와줘
    ```
 

  <img src="https://github.com/FDX-edu/240819_CopilotEdu_test/raw/main/Lab%2001/media/image4.svg" width="30"> **전문가 팁:** 빠른 답글은 사용자가 선택할 수 있는 옵션을
  제안하여 대화를 성공적인 결과로 이끌 수 있습니다.
  

4.  대화 시작 항목 **저장**

5.  주문 상태 확인 **항목**으로 이동합니다.

6.  트리거 **뒤에 새** 질문 **노드를 추가합니다**.

    ```
    Please could you tell me your order number?
    ```
    ```
    주문 번호를 알려주세요. 
    ```
  
7.  Identify **속성을 변경 하고** Create an Entity**를 선택합니다**.

8.  정규식(Regex)**을 선택하고**, 이름을 Order Number로 지정하고, 해당
    패턴에 대해 ORD-123456과 같은 ID를 자동으로 감지하는 정규식을
    사용합니다

    ```
    ORD-[0-9]{6}
    ```

9.  새 **질문 노드에서** 사용자 응답을 변수로 저장 메뉴를 **선택하고**
    오른쪽의 변수 속성 패널에서 변수 이름을 OrderNumber로 변경합니다.

    <img src="https://github.com/FDX-edu/240819_CopilotEdu_test/raw/main/Lab%2002/media/image40.png">

**다음 단계:** 다음 작업으로 이동하기 전에 다음과 같은 다양한 풍부한
응답 유형으로 이 프로세스를 반복하여 다양한 속성에 익숙해지도록 시간을
할애합니다. 자세한 내용은 메시지 보내기를 참조하십시오.

-   이미지
-   비디오
-   기본 카드
-   적응형 카드
-   빠른 답변

<img src="https://github.com/FDX-edu/240819_CopilotEdu_test/raw/main/Lab%2001/media/image4.svg" width="30"> **전문가 팁:** 적응형 카드 샘플 및 작성 경험은 다음 웹 사이트를 확인하세요.                               

-   <https://adaptivecards.io/samples/>                       
-   <https://adaptivecards.io/designer/>                      
-   <https://amdesigner.azurewebsites.net/>                   



